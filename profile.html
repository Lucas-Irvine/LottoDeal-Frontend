<!DOCTYPE html>
<html lang="en" ng-app="profile_app">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>LottoDeal</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/main.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <!-- why are these at the top and not at the bottom -->
        <!-- AngularJS Include -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.min.js"></script>

        <!-- Angular route -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular-route.min.js"></script>

    </head>

    <body ng-controller="profileController" ng-cloak> <!-- hides until content loads -->

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button id = "home" type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">Home</a>
                </div>
                <center>
                    <div class="col-sm-6 col-lg-4 col-md-4">
                      <form class="navbar-form" role="search" method="get" id="search-form" name="search-form">
                          <div class="btn-group pull-left" style="margin-right:10px; min-width: 100%;">

                              <div class="input-group">
                                  <input type="text" class="form-control" placeholder="Search for Lotteries!" id="query" name="query" ng-model="searchText" value="">
                                  <div class="input-group-btn">
                                      <button type="submit" class="btn btn-success"><span class="glyphicon glyphicon-search"></span></button>
                                  </div>
                              </div>
                          </div>
                      </form>
                  </div>
              </center>
              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a id = "about" href="about.html">About</a>
                    </li>
                    <li>
                        <a id = "sell" href="sell.html">Sell</a>
                    </li>
                    <li>
                        <a id = "contact" href="contact.html">Contact</a>
                    </li>
                    <li>
                        <a id = "profile" href="profile.html">Account</a>
                    </li>
                    <li>
                        <a id = "login" href="login.html">Login</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <div class="container">
    <div class="col-lg-12">
            <br>
            <div class="container-fluid">
            <div class="useravatar col-lg-3">
                <img alt="" id = "profileImage" src="">
            </div>
            <div class="card-info col-lg-9"> <h2 class="card-title section-title" id = "profileName"></h2>
            </div>
            </div>
            <br>
        <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
            <div class="btn-group" role="group">
                <button type="button" id="stars" class="btn btn-primary green" href="#tab1" data-toggle="tab"><span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                    <div class="hidden-xs">Bids</div>
                </button>
            </div>
            <div class="btn-group" role="group">
                <button type="button" id="favorites" class="btn btn-default green" href="#tab2" data-toggle="tab"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                    <div class="hidden-xs">Sold</div>
                </button>
            </div>
            <div class="btn-group" role="group">
                <button type="button" id="following" class="btn btn-default green" href="#tab3" data-toggle="tab"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    <div class="hidden-xs">Reviews</div>
                </button>
            </div>

            <div class="btn-group" role="group">
                <button type="button" id="following" class="btn btn-default green" href="#tab4" data-toggle="tab"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
                    <div class="hidden-xs">Settings</div>
                </button>
            </div>






        </div>

        <!-- bids tab -->

        <div class="tab-content">
            <div class="tab-pane fade in active" id="tab1" ngStyle="{position: relative}">
                <h3 id = "BidCount"> Current Bids</h3>
                <hr>
                <div ng-repeat= "item in items">
                    <div class="col-sm-4">
                        <div class="thumbnail" id="item">
                            <div class="image-item img-fluid">
                            <a href="item.html#!/?id={{item._id}}">
                                <img ng-src="{{item.src}}" class="img-hover img-fluid" id="centered-and-cropped" alt="">
                            </a>
                            </div>
                            <div class="caption">
                                <p class="pull-right" id="amountRaised-{{item._id}}">${{item.amountRaised}} of ${{item.price}} raised</p>
                                <p style="text-decoration-line: bold;"><a href="item.html#!/?id={{item._id}}">{{item.title}}</a>
                                </p>
                                <div class="progress" id="thumbnail-bar">
                                    <div class="progress-bar progress-bar-success progress-bar-striped" id="progress-bar-{{item._id}}" role="progressbar" aria-valuenow="40"
                                         aria-valuemin="0" aria-valuemax="100" style="width:{{item.percentageRaised}}%">
                                    </div>
                                </div>
                                <p> {{item.expirationDate}} </p>
                                <div class="description-container rows">
                                    <p class="description">
                                        {{item.shortDescription}}
                                    </p>
                                </div>
                            </div>
                            <div class="row bid-buttons">
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(item._id, 1, item.amountRaised, item.price, item.title);" id="{{item._id}}">$1.00</button>
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(item._id, 2, item.amountRaised, item.price, item.title);" id="{{item._id}}">$2.00</button>
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(item._id, 5, item.amountRaised, item.price, item.title);" id="{{item._id}}">$5.00</button>
                            </div>
                            <div class="ratings">

                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    Seller Rating: {{accounts[$index].averageRating}} / 5
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    <a href="user.html#!/?id={{item.sellerID}}">Seller: {{item.sellerName}}</a>
                                </div>
                            </div>
                        </div>
                    </div>


            </div>
        </div>

        <!-- Items tab -->

        <div class="tab-pane fade in" id="tab2">
        <div class="row">
            <h3>Listed Items</h3>
            <hr>
            <div ng-repeat= "listedItem in listedItems">
                <div class="col-sm-4">
                        <div class="thumbnail" id="item">
                            <div class="image-item img-fluid">
                            <a href="item.html#!/?id={{listedItem._id}}">
                                <img ng-src="{{listedItem.src}}" class="img-hover img-fluid" id="centered-and-cropped" alt="">
                            </a>
                            </div>
                            <div class="caption">
                                <p class="pull-right" id="amountRaised-{{listedItem._id}}">${{listedItem.amountRaised}} of ${{listedItem.price}} raised</p>
                                <p style="text-decoration-line: bold;"><a href="item.html#!/?id={{listedItem._id}}">{{listedItem.title}}</a>
                                </p>
                                <div class="progress" id="thumbnail-bar">
                                    <div class="progress-bar progress-bar-success progress-bar-striped" id="progress-bar-{{listedItem._id}}" role="progressbar" aria-valuenow="40"
                                         aria-valuemin="0" aria-valuemax="100" style="width:{{listedItem.percentageRaised}}%">
                                    </div>
                                </div>
                                <p> {{listedItem.expirationDate}} </p>
                                <div class="description-container rows">
                                    <p class="description">
                                        {{listedItem.shortDescription}}
                                    </p>
                                </div>
                            </div>
                            <div class="row bid-buttons">
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(listedItem._id, 1, listedItem.amountRaised, listedItem.price, listedItem.title);" id="{{listedItem._id}}">$1.00</button>
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(listedItem._id, 2, listedItem.amountRaised, listedItem.price, listedItem.title);" id="{{listedItem._id}}">$2.00</button>
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(listedItem._id, 5, listedItem.amountRaised, listedItem.price, listedItem.title);" id="{{listedItem._id}}">$5.00</button>
                            </div>
                            <div class="ratings">

                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    Seller Rating: {{accounts[$index].averageRating}} / 5
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    <a href="user.html#!/?id={{listedItem.sellerID}}">Seller: {{listedItem.sellerName}}</a>
                                </div>
                            </div>
                        </div>
                    </div>

        </div>
        </div>

        <div class="rows">
            <h3> Sold Items </h3>
            <hr>

        <!-- GET Sold items -->
        <div ng-repeat= "soldItem in soldItems">
        <div class="col-sm-4">
                        <div class="thumbnail" id="item">
                            <div class="image-item img-fluid">
                            <a href="item.html#!/?id={{soldItem._id}}">
                                <img ng-src="{{soldItem.src}}" class="img-hover img-fluid" id="centered-and-cropped" alt="">
                            </a>
                            </div>
                            <div class="caption">
                                <p class="pull-right" id="amountRaised-{{soldItem._id}}">${{soldItem.amountRaised}} of ${{soldItem.price}} raised</p>
                                <p style="text-decoration-line: bold;"><a href="item.html#!/?id={{soldItem._id}}">{{soldItem.title}}</a>
                                </p>
                                <div class="progress" id="thumbnail-bar">
                                    <div class="progress-bar progress-bar-success progress-bar-striped" id="progress-bar-{{soldItem._id}}" role="progressbar" aria-valuenow="40"
                                         aria-valuemin="0" aria-valuemax="100" style="width:{{soldItem.percentageRaised}}%">
                                    </div>
                                </div>
                                <p> {{soldItem.expirationDate}} </p>
                                <div class="description-container rows">
                                    <p class="description">
                                        {{soldItem.shortDescription}}
                                    </p>
                                </div>
                            </div>
                            <div class="row bid-buttons">
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(soldItem._id, 1, soldItem.amountRaised, soldItem.price, soldItem.title);" id="{{soldItem._id}}">$1.00</button>
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(soldItem._id, 2, soldItem.amountRaised, soldItem.price, soldItem.title);" id="{{soldItem._id}}">$2.00</button>
                                <button type="button" class="btn btn-success btn-sm" buttonType="bidButton" ng-click="bid(soldItem._id, 5, soldItem.amountRaised, soldItem.price, soldItem.title);" id="{{soldItem._id}}">$5.00</button>
                            </div>
                            <div class="ratings">

                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    Seller Rating: {{accounts[$index].averageRating}} / 5
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6">
                                    <a href="user.html#!/?id={{soldItem.sellerID}}">Seller: {{soldItem.sellerName}}</a>
                                </div>
                            </div>
                        </div>
                    </div>

    </div>
    </div>
</div>


<!-- Reviews Tab -->
<div class="tab-pane fade in" id="tab3">
    <div class="container">


    <div class="row">
        <div class="col-sm-3">
            <div class="rating-block">

            <div ng-model= "reviewData">
                <h3>Average Rating</h3>
                <hr>
                <h2 id = "averageRating" class="bold padding-bottom-7">{{reviewData.averageRating}} <small>/ 5</small></h2>

                </div>



            </div>
        </div>

    </div>

    <!-- GET Reviews  -->
    <div ng-repeat= "review in reviews">
        <div class="row">
            <div class="col-sm-7">
                <hr/>
                <div class="review-block">
                    <div class="row">
                        <div class="col-sm-3">
                            <img ng-src="{{reviewers[$index].pictureURL}}" class="img-rounded">
                            <div class="review-block-name"><a href="user.html#!/?id={{reviewers[$index].fbid}}">{{reviewers[$index].fullName}}</a></div>
                            <div class="review-block-date">Date Posted: {{review.datePosted}}</div>
                        </div>
                        <div class="col-sm-9">
                            <div class="review-block-rate">

                                <div class="ratingStatic" style="color: gold;">
                                    <!-- &#9734; is not filled in triangle-->
                                    <!-- &#9733; is filled in triangle-->

                                    <span name="rating" ng-show="{{review.stars}} >= 1">&#9733;</span>
                                    <span name="rating" ng-show="{{review.stars}} < 1">&#9734;</span>


                                    <span name="rating" ng-show="{{review.stars}} >= 2">&#9733;</span> 
                                    <span name="rating" ng-show="{{review.stars}} < 2">&#9734;</span>

                                    <span name="rating" ng-show="{{review.stars}} >= 3">&#9733;</span> 
                                    <span name="rating" ng-show="{{review.stars}} < 3">&#9734;</span>

                                    <span name="rating" ng-show="{{review.stars}} >= 4">&#9733;</span> 
                                    <span name="rating" ng-show="{{review.stars}} < 4">&#9734;</span> 

                                    <span name="rating" ng-show="{{review.stars}} == 5">&#9733;</span>
                                    <span name="rating" ng-show="{{review.stars}} < 5">&#9734;</span>
                                </div>


                           <!--  <span type = "radio" name = "rating" ng-show="matchCount==1">{{review.stars}} / 5</span> -->



                            </div>
                            <div class="review-block-description">{{review.reviewDes}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>
</div> <!-- /container -->


<!-- settings tab -->

<div class="tab-pane fade in" id="tab4">





    <!-- GET Account Information  -->
    <div ng-model= "account">
        <div class="jumbotron">
            <form class="form-horizontal" onsubmit = "updateSettings()">
                <fieldset>
                <h4>Current Email Address : {{account.email}}</h4>
                    <!-- Text input-->
                    <div class="form-group">
                      <label class="col-md-4 control-label" for="textinput">Change Your Email Address To</label>  
                      <div class="col-md-4">
                          <input id="newEmail" name="textinput" type="text" placeholder="Your New Email" required class="form-control input-md">

                      </div>
                  </div>
                  <!-- Button (Double) -->
                  <div class="form-group">
                      <label class="col-md-4 control-label" for="button1id">Update Settings</label>
                      <div class="col-md-8">
                        <button id="button1id" type = "submit" name="button1id" class="btn btn-success">Update</button>
                        <button id="button2id" type = "reset" name="button2id" class="btn btn-danger">Cancel</button>
                    </div>
                </div>
            </fieldset>
        </form>
        </div>
    </div>



</div>






</div>
</div>
</div>




<!-- Footer -->
<footer>
    <hr>
    <div class="rows">
      <div class="col-lg-3">
        <a href="contact.html" class="footerlink">Contact Us</a>
      </div>
      <div class="col-lg-3">
        <a href="about.html" class="footerlink">About Us</a>
      </div>
        <div class="col-lg-6">
            <p>Copyright &copy; LottoDeal 2017</p>
            </div>
    </div>
</footer>

<!-- jQuery -->
<script src="js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>

<!-- Custom script -->
<script src="./js/profile.js"></script>

<!-- dynamic loading of pages -->
<script src="js/tabs.js"></script>

</body>

</html>


